


/**
 * @namespace A module for managing the 2D GUI
 */
var lgb = (function(lgb) {


	/**
	 * @namespace MVC controller 
	 */
	lgb.model = lgb.model || {};
	
	lgb.model.XmlParser = function(xml){

		this.xml = xml;
		this.xpathResult = null;
		this.currentNode = null;
	};
	
	
	
	lgb.controller.ModeController.prototype = {
		
		makeRootNode: function(xpath) {

			this.xpathResult = this.xml.evaluate(xpath, this.xml, null, XPathResult.ANY_TYPE, null);
			this.currentNode = this.xpathResult.iterateNext();
			
			return this.currentNode;
		},
		getId: function() {

			return getNodeValue("@id",  this.currentNode);
			
		},
		
		getNodeValue : function(xpath, searchNode) {
			
			//var node = xml.evaluate("@id", node, null, XPathResult.ANY_TYPE, null)
			
			if (searchNode ==null) {
				searchNode = this.currentNode;
			}
			
			var xpathRes = xml.evaluate(xpath, searchNode, null, XPathResult.ANY_TYPE, null)
			var resultNode = xpathRes.iterateNext();
			
			
			return resultNode.nodeValue;
		},
		
		getFloatArray : function (searchNode) {
			
			if (searchNode ==null) {
				searchNode = this.rootNode;
			}
			
			var ary = this.node.textContent.split(',');
			var len = ary.length;

			//convert by all array elements to integer
			for(var i=0;i<len;i++) {
				ary[i] = parseFloat(ary[i]);
			}
				
			return ary;
			
		}
		
		
		
		
		

	};
	


	return lgb;
	
})(lgb || {});










