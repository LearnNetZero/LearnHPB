var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;c=c.substring(0,c.lastIndexOf("."));){if(goog.getObjectByName(c))break;goog.implicitNamespaces_[c]=!0}}goog.exportPath_(a)};
goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};if(!COMPILED)goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={};goog.exportPath_=function(a,c,b){a=a.split(".");b=b||goog.global;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(c)?b[d]=c:b=b[d]?b[d]:b[d]={}};
goog.getObjectByName=function(a,c){for(var b=a.split("."),d=c||goog.global,e;e=b.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,c){var b=c||goog.global,d;for(d in a)b[d]=a[d]};
goog.addDependency=function(a,c,b){if(!COMPILED){for(var d,a=a.replace(/\\/g,"/"),e=goog.dependencies_,g=0;d=c[g];g++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;c=b[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER)goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;c>=0;--c){var b=a[c].src,d=b.lastIndexOf("?"),
d=d==-1?b.length:d;if(b.substr(d-7,7)=="base.js"){goog.basePath=b.substr(0,d-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+a+'"><\/script>'),!0):!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=
!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in b||(b[e]=!0,c.push(e))}}var c=[],b={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<c.length;e++)if(c[e])goog.importScript_(goog.basePath+c[e]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),
goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js");
goog.typeOf=function(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c};goog.propertyIsEnumerableCustom_=function(a,c){if(c in a)for(var b in a)if(b==c&&Object.prototype.hasOwnProperty.call(a,c))return!0;return!1};goog.propertyIsEnumerable_=function(a,c){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,c):goog.propertyIsEnumerableCustom_(a,c)};goog.isDef=function(a){return a!==void 0};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};
goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(a){var c=goog.typeOf(a);return c=="array"||c=="object"&&typeof a.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};
goog.isObject=function(a){a=goog.typeOf(a);return a=="object"||a=="array"||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(a){var c=goog.typeOf(a);if(c=="object"||c=="array"){if(a.clone)return a.clone();var c=c=="array"?[]:{},b;for(b in a)c[b]=goog.cloneObject(a[b]);return c}return a};goog.bindNative_=function(a,c,b){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,b){if(!a)throw Error();if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,b){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,b);return a.apply(this,c)}};goog.mixin=function(a,c){for(var b in c)a[b]=c[b]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null)goog.global.eval("var _et_ = 1;"),typeof goog.global._et_!="undefined"?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,b=c.createElement("script");b.type="text/javascript";b.defer=!1;b.appendChild(c.createTextNode(a));c.body.appendChild(b);
c.body.removeChild(b)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var b=function(a){return goog.cssNameMapping_[a]||a},d;d=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?b:function(a){for(var a=a.split("-"),c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c.join("-")}:function(a){return a};return c?a+"-"+d(c):d(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
goog.getMsg=function(a,c){var b=c||{},d;for(d in b)var e=(""+b[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a};goog.exportSymbol=function(a,c,b){goog.exportPath_(a,c,b)};goog.exportProperty=function(a,c,b){a[c]=b};goog.inherits=function(a,c){function b(){}b.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new b;a.prototype.constructor=a};
goog.base=function(a,c,b){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),g=!1,f=a.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[c]===d)g=!0;else if(g)return f.prototype[c].apply(a,e);if(a[c]===d)return a.constructor.prototype[c].apply(a,e);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var lgb={Base:{}};console.log("loaded Base");
lgb=function(a){a.Base=function(){};a.Base.prototype.d=function(a){return $.proxy(a,this)};a.Base.prototype.dispatch=function(c,b){var d=jQuery.Event(c);if(null!==b&&void 0!==b)d.value=b;if(a.Config.DEBUG_EVENTS){var e="EventBus - dispatch: {0}".format(c);null!==b&&void 0!==b&&(e+=" : "+b.toString());console.log(e)}a.Base.eventBus.trigger(d)};a.Base.prototype.dispatchLocal=function(c,b){var d=jQuery.Event(c);if(null!==b&&void 0!==b)d.value=b;if(a.Config.DEBUG_EVENTS){var e="EventBus - dispatch: {0}".format(c);
null!==b&&void 0!==b&&(e+=" : "+b.toString());console.log(e)}$(this).trigger(d)};a.Base.prototype.listen=function(c,b){var d=jQuery.proxy(b,this);a.Base.eventBus.bind(c,d)};a.Base.prototype.each=function(a,b){for(var d=a.length,e=0;e<d;e++)b.apply(this,[a[e]])};a.Base.prototype.eachArg=function(a){for(var b=this.eachArg.caller.arguments,d=b.length,e=0;e<d;e++)a.apply(this,[b[e]])};a.Base.prototype.unlisten=function(c,b){var d=jQuery.proxy(b,this);a.Base.eventBus.unbind(c,d)};a.Base.prototype.assertType=
function(a){null===a||void 0===a?jQuery.error("Error when calling assertType expectedType is null or undefined"):!this instanceof a&&jQuery.error("Error when calling assertType object is not of the expected type")};return a}(lgb||{});console.log("parsed Base");lgb.controller={};lgb.controller.ControllerBase={};console.log("loaded ControllerBase");lgb=function(a){a.controller=a.controller||{};a.controller.ControllerBase=function(){a.Base.call(this)};goog.inherits(a.controller.ControllerBase,a.Base);a.controller.ControllerBase.prototype.d=function(a){return $.proxy(a,this)};return a}(lgb||{});console.log("parsed ControllerBase");lgb.controller.MainController={};console.log("loaded MainController");
lgb=function(a){a.controller=a.controller||{};a.controller.MainController=function(){a.controller.ControllerBase.call(this);this.info=this.renderer=this.projector=this.scene=this.camera=null;this.mouse={x:0,y:0};this.stats=this.loader=this.sun=null;this.meshes=[];this.theta=0;this.camdist=500;this.totalColliders=this.totalFaces=0};goog.inherits(a.controller.MainController,a.controller.ControllerBase);a.controller.MainController.prototype.init=function(){this.load()};a.controller.MainController.prototype.load=
function(){var a=document.createElement("div");document.body.appendChild(a);this.info=document.getElementById("info");this.camera=new THREE.Camera(2,window.innerWidth/window.innerHeight,1,1E4);this.camera.position.z=this.camdist;this.loader=new THREE.JSONLoader;this.scene=new THREE.Scene;this.projector=new THREE.Projector;this.renderer=new THREE.WebGLRenderer;this.renderer.setSize(window.innerWidth,window.innerHeight);a.appendChild(this.renderer.domElement);this.scene.addLight(new THREE.AmbientLight(6316128));
this.sun=new THREE.DirectionalLight(16777215);this.sun.position=this.camera.position.clone();this.scene.addLight(this.sun);this.loadMesh("damper-solo.obj_ascii.js");var b=new THREE.LineBasicMaterial({color:16711680,opacity:1,linewidth:3}),d=new THREE.Geometry;d.vertices.push(new THREE.Vertex(new THREE.Vector3(-100,0,0)));d.vertices.push(new THREE.Vertex(new THREE.Vector3(100,0,0)));line=new THREE.Line(d,b);this.scene.addObject(line);this.stats=new Stats;this.stats.domElement.style.position="absolute";
this.stats.domElement.style.top="0px";a.appendChild(this.stats.domElement);a.onmousemove=this.d(this.onDocumentMouseMove);this.animate()};a.controller.MainController.prototype.loadMesh=function(a){this.loader.load({model:"3d-assets/"+a,callback:this.d(this.onGeometryLoaded)})};a.controller.MainController.prototype.onGeometryLoaded=function(a){this.addOneMesh(new THREE.Vector3(0,0,0),a)};a.controller.MainController.prototype.addOneMesh=function(a,b){this.totalFaces+=b.faces.length;this.totalColliders++;
var d=new THREE.Mesh(b,new THREE.MeshPhongMaterial({color:13056}));d.position=a;this.scene.addObject(d);var e=THREE.CollisionUtils.MeshColliderWBox(d);THREE.Collisions.colliders.push(e);this.meshes.push(d)};a.controller.MainController.prototype.onError=function(a){alert(a)};a.controller.MainController.prototype.animate=function(){var a=$.proxy(this.animate,this);requestAnimationFrame(a);a=new THREE.Vector3(this.mouse.x,this.mouse.y,0.5);this.projector.unprojectVector(a,this.camera);a=new THREE.Ray(this.camera.position,
a.subSelf(this.camera.position).normalize());if(this.meshes.length!==0){var b,d=this.meshes.length;for(b=0;b<d;b++)this.meshes[b].materials[0].color.setHex(13056);this.info.innerHTML="";(b=THREE.Collisions.rayCastNearest(a))?(this.info.innerHTML+="<br />Found @ normal "+this.vts(b.normal),a=a.origin.clone().addSelf(a.direction.clone().multiplyScalar(b.distance)),line.geometry.vertices[0].position=a,line.geometry.vertices[1].position=a.clone().addSelf(b.normal.multiplyScalar(100)),line.geometry.__dirtyVertices=
!0,line.geometry.__dirtyElements=!0,b.mesh.materials[0].color.setHex(12255232)):this.info.innerHTML+="<br />No intersection";this.camera.position.x=this.camdist*Math.cos(this.theta);this.camera.position.z=this.camdist*Math.sin(this.theta);this.camera.position.y=this.camdist/2*Math.sin(this.theta*2);this.sun.position.copy(this.camera.position);this.sun.position.normalize();this.theta+=0.0050;this.renderer.render(this.scene,this.camera);this.stats.update()}};a.controller.MainController.prototype.onDocumentMouseMove=
function(a){a.preventDefault();this.mouse.x=a.clientX/window.innerWidth*2-1;this.mouse.y=-(a.clientY/window.innerHeight)*2+1};a.controller.MainController.prototype.vts=function(a){return a?a.x.toFixed(2)+" , "+a.y.toFixed(2)+" , "+a.z.toFixed(2)+"<br>":"undefined<br>"};return a}(lgb||{});console.log("parsed MainController");lgb.controller.LoaderController={};
lgb=function(a){a.controller=a.controller||{};a.controller.LoaderController=function(){this.totalFaces=0};a.controller.LoaderController.prototype={load:function(){var a=document.createElement("div");document.body.appendChild(a);this.jasonLoader=new THREE.JSONLoader;this.renderer=new THREE.WebGLRenderer;this.renderer.setSize(window.innerWidth,window.innerHeight);a.appendChild(this.renderer.domElement);this.loadMesh()},loadMesh:function(){this.jasonLoader.load({model:"3d-assets/damper-solo.obj_ascii.js",callback:$.proxy(this.onGeometryLoaded,
this)})},onGeometryLoaded:function(a){this.addOneMesh(new THREE.Vector3(0,0,0),a)},addOneMesh:function(a,b){this.totalFaces+=b.faces.length;this.totalColliders++;var d=new THREE.Mesh(b,new THREE.MeshPhongMaterial({color:13056}));d.position=a;this.scene.addObject(d);var e=THREE.CollisionUtils.MeshColliderWBox(d);THREE.Collisions.colliders.push(e);this.meshes.push(d)}};console.log("parsed LoaderController");return a}(lgb||{});function main(){(new lgb.controller.MainController).init()};
