
o3djs.require('lgb.model.EnvelopeModel');
o3djs.require('lgb.view.EnvelopeView');


var lgb = (function(lgb) {

	lgb.controller = lgb.controller || {};
	
	
	/**
	 * @namespace MVC controller 
	 * @extends lgb.controller.ControllerBase
	 */
	lgb.controller.EnvelopeController = function(parentController){
		
		lgb.controller.ControllerBase.call(this);
				
		//this.parentController = parentController;
		this.dataModel = new lgb.model.EnvelopeModel();
		this.view = new lgb.view.EnvelopeView();


			
	};
	
	
	lgb.controller.EnvelopeController.prototype = {
		
		init: function() {
			var delegate = jQuery.proxy( this.onGuiEvent, this );
			$('body').bind(this.dataModel.name, delegate);

			
			this.view.init(this.dataModel);
			
		},
/*
		onModelsLoaded : function(event) {
		//	var action = parseInt(event.action, 10);
		//	console.log ('floor to ceiling height: ' + event.action);
		
			this.envelope3d9ft = lgb.loader.modelList['9FootEnvelope'];
			this.envelope3d11ft = lgb.loader.modelList['11FootEnvelope'];
			this.envelope3d13ft = lgb.loader.modelList['13FootEnvelope'];
			
			this.envelope3d9ft.setTransformVisible(this.envelope3d9ft.root, false);
			this.envelope3d11ft.setTransformVisible(this.envelope3d11ft.root, false);
			this.envelope3d13ft.setTransformVisible(this.envelope3d13ft.root, false);
			
			this.view.createFloors(this.envelope3d13ft,3);
			
			
		},
*/
		
		
		onGuiEvent : function(event) {
			
			console.log ('floor to ceiling height: ' + event.action);
			
			var height = parseInt(event.action, 10);
			this.dataModel.setFloorHeight(height);
			
		},

		resetAnimation: function() {
			this.view.resetAnimation();
		},
		get3dModels: function() {
			return this.view.get3dModels();
		}
	
	};
	


	return lgb;
	
})(lgb || {});










