

var lgb = (function(lgb) {

	/**
	 * @namespace A module for utilities
	 */
	lgb.utils = lgb.utils || {};



	
	/** 
	 * used to preload images like for image roll-overs
	 *
	 * @param {images} array of image names
	 * @return {void}
	 */
	lgb.utils.preload = function(images){
	        var i = 0;
	        var imageArray = new Array();
	        imageArray = images.split(',');
	        
	        var imageObj = new Image();
	        for(i=0; i<=imageArray.length-1; i++) {
	        	var src = 'images/' + imageArray[i];
	        	
	           // document.write('<img src="' + src + '" />');// Write to page (uncomment to check images)
	            imageObj.src=src;
	        }
	};
	

	
	/**
	 * This method returns a delegate function closure that will call
	 * targetMethod on targetObject with specified arguments and with
	 * arguments specified by the caller of this delegate
	 * 
	 * @param {Object} targetObj - the object to call the method on
	 * @param {Object} targetMethod - the method to call on the object
	 * @param {Object} [arg1] - optional argument 1
	 * @param {Object} [arg2] - optional argument 2
	 * @param {Object} [arg3] - optional argument 3
	 */
	lgb.utils.delegate2 = function(targetObj, targetMethod, arg1, arg2, arg3){
		
	        // Create an array containing the arguments
	        var initArgs = new Array();
	
	        // Skip the first two arguments as they are the target object and method
	        for( var i = 2; i < arguments.length; ++i )
	        {
	                initArgs.push( arguments[i] );
	        }
	
	        // Return the closure
	        return function()
	        {
	                // Add the initial arguments of the delegate
	                var args = initArgs.slice(0);
	
	                // Add the actual arguments specified by the call to this list
	                for( var i = 0; i < arguments.length; ++i )
	                {
	                        args.push( arguments[i] );
	                }
	
	                return targetMethod.apply( targetObj, args );
	        };
			
	};
	
	/**
	* Used to verify the number and type of arguments passed to a function
	* 
	* @param {arrayOfTypes} An array of Strings which speicfy the type of each expected argument
	* @param {expectedArgCount} The number of arguments expected
	*
	*/
	lgb.utils.validateArgs = function ( arrayOfTypes, expectedArgCount){
		//get the parameters of the function that is executing validArgs
		var args = lgb.utils.validArgs.caller.arguments,
			len = args.length;

	//Check if the function get the number of parameter you are expecting. If not throw an error.
	//If the parameter declared is 0 then do not perform this check
	    if(expectedArgCount){
	         if(expectedArgCount !== len){
			 	var msg = 'The amount of paramers allowed it is ' + expectedArgCount + ', received '+ len;
			 	jQuery.error(msg);
	         }
	     }
		 
	    //Verify the type of each of the parameters. If one is wrong throw an error.
	    if(arrayOfTypes){
		 	for(var i = 0; i < len; i++){
			    if(typeOf(args[i]) !== arrayOfTypes[i]){
					
					jQuery.error('In parameter no. ' + (i+1)  + ' the type should be ' + arrayOfTypes[i] + ', received ' + typeOf(args[i]));
					//throw new Error();
			    }           
			}
	     }
	};



	/**
	* Inspects the contents of the array to verify that all the elements are 
	* of the specified data type. Throws and exception if not
	*
	* @param {type} The type that each element should be
	*/
	Array.prototype.assertContainsType = function(expectedType){
		
		var ary = this;
		var msg = 'Error in lgb.utils.validateTypeInArray';
		
		if(null === ary || undefined === ary) {
			jQuery.error(msg + " array is null or undefined");
		} else if (!ary.constructor == Array ) {
			jQuery.error(msg + " ary not actually instanceof array");
		} else if (ary.length < 1) {
			jQuery.error(msg + " array length is less than one");
		} else if (null === expectedType || undefined === expectedType) {
			jQuery.error(msg + " expectedType is null or undefined");
		} else {
			var len = ary.length;
			for (var i=0; i<len; i++) {
				var value = ary[i];
				if (!value instanceof expectedType) {
					jQuery.error(msg + " expectedType is not the expected type");
				}
			}
		}
	};
	
	String.prototype.format = function () {
	  var args = arguments;
	  return this.replace(/\{\{|\}\}|\{(\d+)\}/g, function (m, n) {
	    if (m == "{{") { return "{"; }
	    if (m == "}}") { return "}"; }
	    return args[n];
	  });
	};



	delegate = function(theFunction) {
		
		var context = delegate.caller,
		var delegate = $.proxy(theFunction, context);
		
		return delegate;
	}

	return lgb;
	
})(lgb || {});